# API Test Solution

ะะตัะตะฝะธะต ัะตััะพะฒะพะณะพ ะทะฐะดะฐะฝะธั ะดะปั ัะพะฑะตัะตะดะพะฒะฐะฝะธั - ะฒะทะฐะธะผะพะดะตะนััะฒะธะต ั API ัะตัะตะท ัะตะฟะพัะบั HTTP-ะทะฐะฟัะพัะพะฒ.

## ๐ ะะฟะธัะฐะฝะธะต

PHP-ัะบัะธะฟั ะฒัะฟะพะปะฝัะตั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะธะท ััะตั HTTP-ะทะฐะฟัะพัะพะฒ:
1. POST-ะทะฐะฟัะพั ะดะปั ะฟะพะปััะตะฝะธั ะฟะตัะฒะพะน ัะฐััะธ ะบะพะดะฐ
2. GET-ะทะฐะฟัะพั ะดะปั ะฟะพะปััะตะฝะธั ะฒัะพัะพะน ัะฐััะธ ะบะพะดะฐ
3. POST-ะทะฐะฟัะพั ั ะพะฑัะตะดะธะฝะตะฝะฝัะผ ะบะพะดะพะผ ะดะปั ะฟะพะปััะตะฝะธั ัะธะฝะฐะปัะฝะพะณะพ ัะตะทัะปััะฐัะฐ

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั
- PHP >= 7.0
- ะะฐััะธัะตะฝะธะต cURL
- ะะฐััะธัะตะฝะธะต JSON

### ะัะพะฒะตัะบะฐ ััะตะฑะพะฒะฐะฝะธะน
```bash
php -v
php -m | grep curl
php -m | grep json
```

### ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ
```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone https://github.com/Azizbekutkirovich/ICORP-interview.git
cd ICORP-interview

# ะะฐะฟัััะธัะต ัะบัะธะฟั
php index.php
```

## ๐ป ะะฝััััะบัะธะธ ะทะฐะฟััะบะฐ

### ะกะฟะพัะพะฑ 1: ะััะผะพะต ะฒัะฟะพะปะฝะตะฝะธะต
```bash
php index.php
```

### ะกะฟะพัะพะฑ 2: ะงะตัะตะท ะฒะตะฑ-ัะตัะฒะตั
```bash
# ะะฐะฟัััะธัะต ะฒัััะพะตะฝะฝัะน ัะตัะฒะตั PHP
php -S localhost:8000

# ะัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต
http://localhost:8000/index.php
```

### ะกะฟะพัะพะฑ 3: ะะพัะฐะณะพะฒะพะต ะฒัะฟะพะปะฝะตะฝะธะต
```bash
php index.php
```

## ๐๏ธ API Reference

### ะะปะฐัั ApiTest

#### ะกะฒะพะนััะฒะฐ
| ะกะฒะพะนััะฒะพ | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|----------|-----|----------|
| `$endpoint` | string | URL ะบะพะฝะตัะฝะพะน ัะพัะบะธ API |
| `$timeout` | int | ะขะฐะนะผะฐัั ะทะฐะฟัะพัะฐ ะฒ ัะตะบัะฝะดะฐั |

#### ะะตัะพะดั
| ะะตัะพะด | ะะฐัะฐะผะตััั | ะะพะทะฒัะฐัะฐะตั | ะะฟะธัะฐะฝะธะต |
|-------|-----------|------------|----------|
| `execute()` | - | array/string | ะัะฟะพะปะฝัะตั ะฟะพะปะฝัั ัะตะฟะพัะบั ะทะฐะฟัะพัะพะฒ |
| `firstRequest()` | - | array | ะะตัะฒัะน POST-ะทะฐะฟัะพั |
| `secondRequest($url)` | string $url | array | GET-ะทะฐะฟัะพั ะฟะพ URL |
| `finalRequest($code)` | string $code | array | ะคะธะฝะฐะปัะฝัะน POST-ะทะฐะฟัะพั |
| `sendRequest($url, $method, $data)` | string, string, array | array | ะฃะฝะธะฒะตััะฐะปัะฝัะน HTTP-ะทะฐะฟัะพั |

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะทะผะตะฝะตะฝะธะต endpoint
```php
$client = new ApiTest();
$client->endpoint = "https://your-api.com/endpoint";
$client->timeout = 30;
```

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```bash
export API_ENDPOINT="https://test.icorp.uz/private/interview.php"
export API_TIMEOUT=20
```

## ๐ ะัะปะฐะดะบะฐ

### ะะบะปััะตะฝะธะต ะดะตัะฐะปัะฝะพะณะพ ะปะพะณะธัะพะฒะฐะฝะธั
```php
// ะะพะฑะฐะฒััะต ะฒ ะฝะฐัะฐะปะพ ัะฐะนะปะฐ
error_reporting(E_ALL);
ini_set('display_errors', 1);

// ะะปั ะปะพะณะธัะพะฒะฐะฝะธั cURL
$options[CURLOPT_VERBOSE] = true;
```

### ะัะพัะผะพัั ะปะพะณะพะฒ
```bash
tail -f /var/log/php_errors.log
```

## ๐ ะะพะทะผะพะถะฝัะต ะพัะธะฑะบะธ ะธ ัะตัะตะฝะธั

| ะัะธะฑะบะฐ | ะัะธัะธะฝะฐ | ะะตัะตะฝะธะต |
|--------|---------|---------|
| `CURL Error: Could not resolve host` | ะัะพะฑะปะตะผั ั DNS/ะธะฝัะตัะฝะตัะพะผ | ะัะพะฒะตัะธัั ะฟะพะดะบะปััะตะฝะธะต |
| `HTTP Error: 404` | ะะตะฒะตัะฝัะน endpoint | ะัะพะฒะตัะธัั URL |
| `Decode error` | ะะตะบะพััะตะบัะฝัะน JSON | ะัะพะฒะตัะธัั ะพัะฒะตั ัะตัะฒะตัะฐ |

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### Docker (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```dockerfile
FROM php:8.1-cli
RUN docker-php-ext-install curl json
COPY . /app
WORKDIR /app
CMD ["php", "api_test.php"]
```

```bash
docker build -t api-test .
docker run api-test
```

## ๐ ะะปะณะพัะธัะผ ัะฐะฑะพัั

```mermaid
sequenceDiagram
    participant Client as ApiTest
    participant API as test.icorp.uz
    participant URI as Dynamic URI
    
    Client->>API: POST /interview.php {msg, uri}
    API-->>Client: {part1, uri}
    
    Client->>URI: GET {received_uri}
    URI-->>Client: {part2}
    
    Client->>API: POST /interview.php {code: part1+part2}
    API-->>Client: Final Result
```

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะพะทะดะฐะฝะพ ะดะปั ัะตััะพะฒะพะณะพ ะทะฐะดะฐะฝะธั

## ๐จโ๐ป ะะฒัะพั

ะกะพะทะดะฐะฝะพ ะฒ ัะฐะผะบะฐั ัะตัะฝะธัะตัะบะพะณะพ ัะพะฑะตัะตะดะพะฒะฐะฝะธั

---